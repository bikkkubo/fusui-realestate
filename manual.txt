# 風水方位分析ツール v2.0 - 使用マニュアル

## システム概要
風水方位の分析と計算を行う高精度システムです。住所検索、地図表示、八方位線描画、九星気学による運気分析機能を搭載しています。

## 基本機能

### 1. 地図表示
- **Google Maps**: 高精度な地図表示（APIキー設定時）
- **OpenStreetMap**: オープンソース地図（フォールバック）
- **ハイブリッド表示**: 自動切り替え機能

### 2. 方位表示
- **主要方位（八方位）**: 北、北東、東、南東、南、南西、西、北西
- **補助方位（十六方位）**: より詳細な方位線表示
- **表示範囲**: 500m～5000mまで調整可能

### 3. 九星気学分析
- **本命星計算**: 生年月日から本命星を自動算出
- **吉方位判定**: 年盤・月盤による吉凶方位の計算
- **運気ヒートマップ**: 地図上に吉方位（緑）・凶方位（赤）を表示

## 操作手順

### 基本操作

1. **地点検索**
   - 左サイドバーの「住所を入力してください」に住所を入力
   - 「地点を検索」ボタンをクリック
   - 地図が指定地点に移動します

2. **方位線表示**
   - 「方位の表示」セクションで主要方位・補助方位を切り替え
   - 「表示距離」スライダーで方位線の長さを調整

3. **地図操作**
   - **ズーム**: 右上の「+」「-」ボタン
   - **地図タイプ切替**: レイヤーアイコンをクリック
   - **中心に戻る**: 十字アイコンをクリック
   - **フルスクリーン**: 最大化アイコンをクリック（デスクトップ版）

### 九星気学分析

1. **九星モード開始**
   - 左サイドバー下部の「九星気学モード」をONにする
   - 画面上部に生年月日入力フォームが表示されます

2. **生年月日入力**
   - 年、月、日をそれぞれ選択
   - 移転希望年月を設定
   - 「方位を計算」ボタンをクリック

3. **結果確認**
   - 本命星が表示されます
   - 地図上に吉方位の扇形セクターが青色で表示されます
   - 「運気ヒートマップ」ボタンで詳細な運気分析を表示

### 運気ヒートマップ

1. **ヒートマップ表示**
   - 九星モードで方位計算後、右上の地図アイコンをクリック
   - 処理中はローディングスピナーが表示されます

2. **色分け**
   - **緑色エリア**: 吉方位（転居に最適）
   - **赤色エリア**: 凶方位（転居は避ける）
   - **解像度**: 1km四方のグリッド
   - **範囲**: 中心から半径120km

3. **表示制御**
   - ヒートマップのON/OFF切り替え可能
   - 地図タイプ（Google Maps/OpenStreetMap）での表示対応

## モバイル操作

### スマートフォン・タブレット

1. **サイドバー表示**
   - 左上のメニューボタンをタップ
   - サイドバーがオーバーレイ表示されます

2. **九星フォーム**
   - モバイルでは画面上部に固定表示
   - タッチ操作に最適化されたコントロール

3. **地図操作**
   - ピンチ操作でズーム
   - タップで中心点移動
   - 右下にズーム・地図切替ボタンを配置

## システム要件

### 推奨環境
- **ブラウザ**: Chrome 90+, Firefox 88+, Safari 14+
- **デバイス**: デスクトップ、タブレット、スマートフォン
- **インターネット**: 地図タイル・APIアクセス用

### API設定
- **Google Maps API**: 高精度な地図表示に必要
  - Maps JavaScript API
  - Geocoding API
- **APIキー未設定時**: OpenStreetMapで自動代替

## データ精度

### 方位計算
- **測地系**: WGS84
- **精度**: 小数点13桁まで表示
- **標高データ**: API経由で取得

### 九星気学
- **暦法**: 旧暦ベースの計算
- **本命星**: 生年月日による正確な算出
- **方位判定**: 年盤・月盤・暗剣殺・五黄殺・歳破を考慮

## トラブルシューティング

### よくある問題

1. **地図が表示されない**
   - インターネット接続を確認
   - ブラウザを再読み込み（Ctrl+F5）
   - 自動的にOpenStreetMapに切り替わります

2. **住所検索ができない**
   - 住所の入力形式を確認
   - 都道府県から詳細住所まで入力

3. **九星計算が表示されない**
   - 生年月日の入力を確認
   - すべての項目（年・月・日・移転年月）を設定

4. **ヒートマップが生成されない**
   - 九星モードで方位計算完了後に使用
   - 処理に時間がかかる場合があります（数秒～1分程度）

### パフォーマンス最適化

1. **大量データ処理**
   - ヒートマップ生成時は他の操作を控える
   - モバイルでは処理を分割実行

2. **メモリ使用量**
   - 長時間使用時はブラウザの再読み込みを推奨
   - 複数タブでの同時使用は避ける

## セキュリティ・プライバシー

### データ保護
- **位置情報**: ブラウザ内のみで処理、外部送信なし
- **個人情報**: 生年月日等はローカル保存
- **API通信**: HTTPS暗号化通信

### 使用制限
- **商用利用**: 個人利用目的での使用を想定
- **データ精度**: 参考情報として活用
- **責任範囲**: 最終的な判断は利用者の責任

## 更新履歴

### v2.0 (最新版)
- Google Maps統合
- 運気ヒートマップ機能追加
- モバイル最適化
- 非同期ローディング対応

### v1.0
- 基本的な方位表示機能
- OpenStreetMap対応
- 九星気学計算機能

## サポート

### 技術的な問題
- ブラウザコンソールでエラーメッセージを確認
- 最新ブラウザでの動作を推奨

### 機能改善要望
- システムの継続的改善を実施
- ユーザーフィードバックを積極的に収集

---
風水方位分析ツール v2.0
© 2024 高精度方位計算システム